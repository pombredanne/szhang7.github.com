---
layout: post
title: "Maven Manual"
description: ""
category: java
tags: [maven, manual, java]
---
{% include JB/setup %}

## What is Maven?
At first glance Maven can appear to be many things, but in a nutshell Maven is an attempt to apply patterns to a project's build infrastructure in order to promote comprehension and productivity by providing a clear path in the use of best practices. Maven is essentially a project management and comprehension tool and as such provides a way to help with managing:

- Builds
- Documentation
- Reporting
- Dependencies
- SCMs
- Releases
- Distribution

## How do I make my first Maven project?
In order to create the simplest of Maven projects, execute the following from the command line:

    mvn archetype:generate \
    -DarchetypeGroupId=org.apache.maven.archetypes \
    -DgroupId=com.mycompany.app \
    -DartifactId=my-app

Once you have executed this command, you will notice a few things have happened. First, you will notice that a directory named my-app has been created for the new project, and this directory contains a file named pom.xml that should look like this:

    <project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
              http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany.app</groupId>
    <artifactId>my-app</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>Maven Quick Start Archetype</name>
    <url>http://maven.apache.org</url>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    </project>

## Build Lifecycle
Maven 2.0 is based around the central concept of a build lifecycle. What this means is that the process for building and distributing a particular artifact (project) is clearly defined.

For the person building a project, this means that it is only necessary to learn a small set of commands to build any Maven project, and the POM will ensure they get the results they desired.

There are three built-in build lifecycles: default, clean, site. The default lifecycle handles your project deployment, the clean lifecycle handles project cleaning, while the site lifecycle handles the creation of your project's site documentation.

###Clean Lifecycle
    pre-clean               executes processes needed prior to the actual project cleaning
    clean                   remove all files generated by the previous build
    post-clean              executes processes needed to finalize the project cleaning

###Default Lifecycle
    validate 	            validate the project is correct and all necessary information is available.
    initialize 	            initialize build state, e.g. set properties or create directories.
    generate-sources 	    generate any source code for inclusion in compilation.
    process-sources 	    process the source code, for example to filter any values.
    generate-resources 	    generate resources for inclusion in the package.
    process-resources 	    copy and process the resources into the destination directory, ready for packaging.
    compile 	            compile the source code of the project.
    process-classes 	    post-process the generated files from compilation, for example to do bytecode enhancement on Java classes.
    generate-test-sources   generate any test source code for inclusion in compilation.
    process-test-sources 	process the test source code, for example to filter any values.
    generate-test-resources create resources for testing.
    process-test-resources 	copy and process the resources into the test destination directory.
    test-compile 	        compile the test source code into the test destination directory
    process-test-classes 	post-process the generated files from test compilation, for example to do bytecode enhancement on Java classes. For Maven 2.0.5 and above.
    test 	                run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed.
    prepare-package 	    perform any operations necessary to prepare a package before the actual packaging. This often results in an unpacked, processed version of the package. (Maven 2.1 and above)
    package 	            take the compiled code and package it in its distributable format, such as a JAR.
    pre-integration-test 	perform actions required before integration tests are executed. This may involve things such as setting up the required environment.
    integration-test 	    process and deploy the package if necessary into an environment where integration tests can be run.
    post-integration-test 	perform actions required after integration tests have been executed. This may including cleaning up the environment.
    verify 	                run any checks to verify the package is valid and meets quality criteria.
    install 	            install the package into the local repository, for use as a dependency in other projects locally.
    deploy 	                done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects.

###Site Lifecycle
    pre-site 	            executes processes needed prior to the actual project site generation
    site 	                generates the project's site documentation
    post-site 	            executes processes needed to finalize the site generation, and to prepare for site deployment
    site-deploy 	        deploys the generated site documentation to the specified web server

## POM (Project Object Model)
A Project Object Model or POM is the fundamental unit of work in Maven. It is an XML file that contains information about the project and configuration details used by Maven to build the project. It contains default values for most projects. Examples for this is the build directory, which is target; the source directory, which is src/main/java; the test source directory, which is src/main/test; and so on.

###Super POM
The Supper POM s Maven's default POM. All POMs extend the Super POM unless explicitly set, meaning the configuration specified in the Super POM is inherited by the POMs you created for your projects.

###Minimal POM
The minimum requirement for a POM are the following:

- project root
- modelVersion - should be set to 4.0.0
- groupId - the id of the project's group.
- artifactId - the id of the artifact (project)
- version - the version of the artifact under the specified group

Here's an example:

    <project>
      <modelVersion>4.0.0</modelVersion>
      <groupId>com.mycompany.app</groupId>
      <artifactId>my-app</artifactId>
      <version>1.0.0</version>
    </project>

## Installation
Maven is a Java tool, so you must have [Java](http://www.oracle.com/technetwork/java/javase/downloads/index.html) installed in order to proceed.

First, [download Maven](http://maven.apache.org/download.html) and follow the [installation instructions](http://maven.apache.org/download.html#Installation). After that, type the following in a terminal or in a command prompt:

    mvn --version

Depending upon your network setup, you may require extra configuration. Check out the [Guide to Configuring Maven](http://maven.apache.org/guides/mini/guide-configuring-maven.html) if necessary.

## Creating a Project
You will need somewhere for your project to reside, create a directory somewhere and start a shell in that directory. On your command line, execute the following Maven goal:

    mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false

### Build the Project
    mvn package

Unlike the first command executed `archetype:generate` you may notice the second is simply a single work - package. Rather than a goal, this is a phase. A phase is a step in the [build lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html), which is an ordered sequence of phases. When a phase is given, Maven will execute every phase in the sequence up to and including the one defined. For example, if we execute compile phase, the phases that actually get executed are:

    1. validate
    2. generate-sources
    3. process-sources
    4. generate-resources
    5. process-resources
    6. compile

You may test the newly compiled and packaged JAR with the following command:

    java -cp target/my-app-1.0-SNAPSHOT.jar com.mycompany.app.App

## Running Maven Tools

###Maven Phases
Although hardly a comprehensive list, these are the most common default lifecycle phases executed.

- validate: validate the project is correct and all necessary information is available.
- compile: compile the source code of the project.
- test: test the compiled source code using a suitable unit testing framework. These tests should not require the code be packaged or deployed.
- package: take the compiled code and package it in its distributable format, such as a JAR.
- integration-test: process and deploy the package if necessary into an environment where integration tests can be run.
- verify: run any checks to verify the package is valid and meets quality criteria.
- install: install the package into the local repository, for use as a dependency in other projects locally.
- deploy: done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects.

There are two other Maven lifecycles of note beyond the default list above. They are

- clean: cleans up artifacts created by prior builds.
- site: generates site documentation for this project.

An interesting thing to note is that phases and goals may be executed in sequence.

    mvn clean dependency:copy-dependencies package

This command will clean the project, copy dependencies, and package the project (executing all phases up to package, of course).

###Generating the Site
    mvn site

This phase generates a site based upon information on the project's pom.


## REFERENCES
- [Maven Getting Started Guide](http://maven.apache.org/guides/getting-started/index.html)
- [Maven in 5 Minutes](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)
- [Introduction to the Build Lifecycle](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

